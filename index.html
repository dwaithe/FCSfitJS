
<!DOCTYPE html>

<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" href="scripts/d3.slider.css" />
<!-- <link href="scripts/d3RangeSlider.css" rel="stylesheet"> -->
<link rel="stylesheet" href="scripts/bootstrap-4.1.3-dist/css/bootstrap.min.css" />
<script src="scripts/d3-simple-slider.js"></script>
<!--<script src="scripts/d3RangeSlider.js"></script>-->

    <!-- Range slider style -->

<script src="scripts/jquery-3.2.1.min.js"></script>
<script src="scripts/bootstrap-4.1.3-dist/JS/bootstrap.min.js"></script>
<script src="scripts/d3.min.js"></script>
<script src="scripts/d3fc.js"></script>
<script src="https://rawgit.com/hippich/bower-semver/master/semver.min.js"></script>




<!-- load the d3.js library -->       
<style> /* set the CSS */



.disable-select {
    user-select: none; /* supported by Chrome and Opera */
   -webkit-user-select: none; /* Safari */
   -khtml-user-select: none; /* Konqueror HTML */
   -moz-user-select: none; /* Firefox */
   -ms-user-select: none; /* Internet Explorer/Edge */
}
.selected { background: #AAAAAA; }
.line {
  fill: none;
  stroke-width: 2px;
}
.label_st { display: inline-block; width: 60px; }
.label_st_calc { display: inline-block; width: 70px; }

.spin_st { display: inline-block; width: 80px; }
.check_st { display: inline-block; width: 20px; }
div.ex2 {
  background-color: white;
  border-color: blue;
  padding: 8px;
  width: 380;
  height: 600px;
  overflow: scroll;
}
div.ex1 {
  background-color: white;
  border-color: blue;
  border-width: 1;
  padding: 8px;
  width: 300;
  height: 400px;
  overflow: scroll;
}

div.row {
  
  padding: 2px;
}
.col-xl- {
  
  padding: 3px;
}
.x-label {
  fill: black;
  font-size: 20px;

}
.tick  {
  color:red;
  font-size: 16px;
  
}


.slider text {
   
  font-size: 16px;
}
.slider {
   
  font-size: 40px;
}



.y-label {
  fill: black;
  font-size: 20px;
}


/*This is the view

</style>
<body >
  <script type="text/javascript">
 //   var scale = 'scale(0.8)';
//document.body.style.webkitTransform =  scale;    // Chrome, Opera, Safari
// document.body.style.msTransform =   scale;       // IE 9
// document.body.style.transform = scale;     // General
const gitHubPath = 'dwaithe/FCSfitJS';  // example repo
const url = 'https://api.github.com/repos/' + gitHubPath + '/tags';

$.get(url).done(data => {
  const versions = data.sort((v1, v2) => semver.compare(v2.name, v1.name));
  $('#version').html(versions[0].name);
});

  </script>


<div class="container-fluid">
<div style="padding: 10px">
<h1 style="display: inline;">FoCuS-fit-JS</h1><p  style="display: inline;"> - <span id="version"></span> - Open source software for fitting correlated FCS (Fluorescence Correlated Spectroscopy) files - <a href="https://github.com/dwaithe/FCSfitJS"> Visit the Github repository</a> - <a href="https://dwaithe.github.io/FCSfitJS/manual/manual.html">Read the manual and documentation.</a> - <a href="https://github.com/dwaithe/FCSfitJS/#How to Cite">How to cite.</a><a href="download test data"></a></p>

</div>
<div class="row">
  <div class="col-xl-3" style="min-width: 470px;"  s>
        <div class="card border-secondary" mb-3>
        <div class="card-header">Fit Controls</div>
        <div class="card-body">
      
          <div>
          <div class="mb-2">
          <label for="formFileSm" class="form-label">Select files to analyse:</label>
          <input type="file" class="form-control-file" style="width: 400px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;"  onchange="open_file_imprt(event)" multiple>
            
          </div>
           
        
         <div class="form-group">
        <div class="form-inline">
          <div class="input-group-prepend">
          <select class="form-control form-control" id="equation" name="equation" onchange="react_to_eqn_change();">
            <!-- <option value="1">Equation 1A</option>-->
            <!-- <option value="2">Equation 1B</option>-->
            <!-- <option value="3">GS neuron</option> -->
            <!-- <option value="4">Vesicle Diffusion</option> -->
            <!-- <option value="5">PB Correction</option> -->
          </select>
        </div>
         <div class="input-group-prepend">
          <select class="form-control form-control" id="triplet" name="triplet" onchange="react_to_fit_change();">
            <option value="1">no triplet</option>
            <option value="2">triplet Eq 2A</option>
            <option value="3">triplet Eq 2B</option>
          </select>
        </div>
       <div class="input-group-prepend">
          <select class="form-control form-control" id="dimension" name="dimension" onchange="react_to_fit_change();">
            <option value="1">2D</option>
            <option value="2">3D</option>
            </select>
            </div>
          </div>
      </div>
      <div class="form-group">
        <div class="form-inline">

            <label class=" col-form-label">No. of diff. species </label>
           

              <input class="form-control" type="number" min="1" max="3" step="1" value="1" id="diffNumSpecSpin" onchange="react_to_fit_change();">
             
            <label class="col-form-label">Triplet States</label>
            <input class="form-control" type="number" min="1" max="3" step="1" value="1" id="tripNumSpecSpin" onchange="react_to_fit_change();">
          </div>
         
            <label> Display model parameters for data: </label><br>
          <select class="form-control form-control" id="modelFitSel" name="modelFitSel" style="width: 300px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;" onchange="react_to_fit_change();">
         
          </select>
        </div>
          <div class="form-group">
          <label> Fit with param: </label>
          <input type="submit" value="Current" class="btn  btn-outline-primary btn-sm" id='fitCurrent_btn'>
          <input type="submit" value="All" class="btn  btn-outline-primary btn-sm" id='fitAll_btn'>
          <input type="submit" value="Only highlighted" class="btn  btn-outline-primary btn-sm" id='fitSelected_btn'>
        </div>
          <div class="form-group">
             <div class="form-inline">
          <label>Fit from:</label> <input type="number" class="form-control" min="0.000001" max="99999" step="1" value="0.1"  id="fit_btn_min" size="5" onchange="update_fit_range();" required> 
          <label>to:</label> <input type="number" class="form-control" min="0.000001" max="99999" step="1" value="1"  id="fit_btn_max" onchange="update_fit_range();" required>
          
        </div>
      </div>
      <div class="form-group">
          <label>Profile: </label>
          <input type="submit" value="load" class="btn  btn-outline-primary btn-sm" id='load_default_profile'>
          <input type="submit" value="save" class="btn  btn-outline-primary btn-sm" id='save_default_profile'>
          <input type="submit" value="store" class="btn  btn-outline-primary btn-sm" id='store_default_profile'>
          <input type="submit" value="apply" class="btn  btn-outline-primary btn-sm" id='apply_default_profile'>
          </div>
          <label class="label_st">Param: </label>

          <label class="label_st">Init: </label>

          <label class="label_st">Vary: </label>
          <label class="spin_st">Min: </label>
          <label class="spin_st">Max: </label>
          <br>
        
        
         
          <div class="breadcrumb">
          <div id="form_sample"></div>

          
          </div>
          <label>Copy: </label>
          <input type="submit" value="Copy Param" class="btn  btn-outline-primary btn-sm" id='copy_param'>
          <input type="submit" value="Copy Plot Data" class="btn  btn-outline-primary btn-sm" id='copy_plot_data'><br>
          <label>Save: </label>
          <input type="submit" value="Save Param" class="btn  btn-outline-primary btn-sm" id='save_param'>
          <input type="submit" value="Save Plot Data" class="btn  btn-outline-primary btn-sm" id='save_plot_data'><br>
</div>
</div>
</div>
      </div>

       <div class=".col-xl-" style="min-width: 400px;">
        <div class="card border-secondary mb-3">
        <div class="card-header">Main plot</div>
        <div class="card-body">
          <label>Zoom/Scaling: </label>
            <input type="radio" name="zoom_mode" id ="zoom_both" value="zoom_both" checked/> Both
            <input type="radio" name="zoom_mode" id="zoom_vertical" value="zoom_vertical" /> Vertical
            <input type="radio" name="zoom_mode" id="zoom_horizontal" value="zoom_horizontal" /> Horizontal.
            <input type="submit" name="reset_plot" class="btn  btn-outline-primary btn-sm" id="reset_plot" value="Reset zoom" />
            <input type="submit" name="zoom_in" class="btn  btn-outline-primary btn-sm" id="zoom_in" value="Zoom in" />
            <input type="submit" name="zoom_out" class="btn  btn-outline-primary btn-sm" id="zoom_out" value="Zoom out" />
          <div id="splash">
            <br>
            <H2> <- Open your files, to load your data and get started. </H2>
            <br>
            <H3>Or click <a href="test_data.zip">here</a> to download some example data.</H3>
            <H3> The data is zipped, please unzip it before trying to analyse.</H3>
            </div>
          <div id="chart" style="width:500;height:600px;left-padding:24px"></div>

            
        

          <label>Fit Slider Range: </label><div id="slider-range"></div>
          <p id="value-range"></p>
          <div id="uploadsts"></div>

           <div id="residuals" style="width:800px;height:200px;left-padding:24px"></div>
        </div>
      </div>
           

         
        

       </div>
  <div class="col-xl-2" style="min-width: 450px;">
    <div class="card border-secondary ">
        <div class="card-header">Data Viewer</div>
        <div class="card-body" >
          <div class="breadcrumb" style="overflow: scroll;white-space: nowrap; min-height: 600px;max-height: 600px">

            
            <div id="data-list" class="disable-select"   oncontextmenu="return false;" ></div>
         </div>
            <div class="disable-select">
            ac: CH1 <input type="checkbox"  id="CH1_chbx" checked> CH2 <input type="checkbox" id="CH2_chbx" checked> CH3 <input type="checkbox" id="CH3_chbx" checked> CH4 <input type="checkbox" id="CH4_chbx" checked>
            </div>
            <div class="disable-select">
            CH12 <input type="checkbox"  id="CH12_chbx" checked> CH13 <input type="checkbox" id="CH13_chbx" checked>  CH14 <input type="checkbox" id="CH14_chbx" checked> CH23 <input type="checkbox" id="CH23_chbx" checked> CH24 <input type="checkbox" id="CH24_chbx" checked> CH34 <input type="checkbox" id="CH34_chbx" checked>
            </div>

            <div class="disable-select">
            CH21 <input type="checkbox"  id="CH21_chbx" checked> CH31 <input type="checkbox" id="CH31_chbx" checked>  CH41 <input type="checkbox" id="CH41_chbx" checked> CH32 <input type="checkbox" id="CH32_chbx" checked> CH42 <input type="checkbox" id="CH42_chbx" checked> CH43 <input type="checkbox" id="CH43_chbx" checked>
            </div>

            <br>
            <div class="form-group">
            <input type="submit" value="Plot Checked Data" class="btn  btn-outline-primary btn-sm" id='plot_checked'>
            <input type="submit" value="Check All" class="btn  btn-outline-primary btn-sm" id='check_all'>
            </div>
            <div class="form-group">
            <input type="submit" value="Clear Fit Data All/highlighted" class="btn  btn-outline-primary btn-sm" id='clear_fits'>
            </div>
</div>
 </div>
</div>
</div>
 </div>
<script src="scripts/main.js"></script>
<script src="scripts/fitting_method_se.js"></script>
<script src="scripts/impt_csv.js"></script>
<script src="scripts/impt_fcs.js"></script>
<script src="scripts/impt_sin.js"></script>
<script src="scripts/plotting_fns.js"></script>
<script src="scripts/interface.js"></script>
<script src="scripts/controller.js"></script>
<script src="custommodels/custom_models.js"></script>

<script type="text/javascript">
//Updates models from custom_models

var select1 = document.getElementById("equation"); 
var options = fit_obj.diffModEqSel

for(var i = 0; i < options.length; i++) {
    var opt = options[i];
    var el = document.createElement("option");
    el.textContent = opt;
    el.value = i;
    select1.appendChild(el);
}


</script>
</body>